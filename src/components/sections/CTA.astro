---
import Container from "../shared/Container.astro";
import Paragraph from "../shared/Paragraph.astro";

import { Button, Modal, ModalBody } from "free-astro-components";
---

<script>
  console.log(document.getElementById("client-form"));

  document
    .getElementById("client-form")
    .addEventListener("submit", async (e) => {
      e.preventDefault();
      const form = e.target;
      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());
      // pc_2909d82f299578e4cd675d6178b7e013
      const req = await fetch(
        "https://connect.pabbly.com/workflow/sendwebhookdata/IjU3NjYwNTY5MDYzMDA0MzE1MjZkNTUzMTUxMzIi_pc",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: "Bearer pc_2909d82f299578e4cd675d6178b7e013",
          },
          body: JSON.stringify(data),
        }
      );

      console.log(await req.json());
    });
</script>

<section id="cta" class="pb-20">
  <Container>
    <div
      class="w-full relative py-8 md:py-10 px-6 md:px-8 rounded-2xl bg-gradient-to-tr from-gray-100 to-gray-200 dark:from-gray-900"
    >
      <div class="absolute right-0 top-0 h-full w-full flex justify-end">
        <div class="w-28 h-28 overflow-auto flex rounded-xl relative blur-2xl">
        </div>
      </div>

      <div class="absolute left-0 bottom-0 h-full w-full flex items-end">
        <div class="w-28 h-28 overflow-auto flex rounded-xl relative blur-2xl">
        </div>
      </div>
      <div class="mx-auto text-center max-w-xl md:max-w-2xl relative">
        <h1
          class="text-3xl/tight sm:text-4xl/tight md:text-5xl/tight
          font-bold text-heading-1"
        >
          <span style="color: #ED2024">ÚNETE</span> A NUESTRA <span
            style="color: #ED2024">VELOCIDAD</span
          >
        </h1>
        <Paragraph className={"pt-10"}>
          Nuestro equipo te contactará enseguida
        </Paragraph>
        <div class="mx-auto max-w-md sm:max-w-xl pt-10">
          <Button
            variant={"primary"}
            label="Contáctanos"
            data-modal-trigger="modal-id"
          >
            <span class="text-white relative z-[5]">Contáctanos</span>
          </Button>
        </div>
      </div>
    </div>
  </Container>
</section>

<Modal id="modal-id">
  <ModalBody>
    <div
      class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"
    >
      <div class="bg-white p-8 rounded-lg">
        <h2 style="color: #ED2024" class="text-2xl font-bold mb-4">
          Muévete más rapido con nosotros
        </h2>
        <form class="space-y-4" id="client-form">
          <div>
            <label class="block">Nombre:</label>
            <input type="text" name="name" class="border p-2 w-full" />
          </div>
          <div>
            <label class="block">Apellido:</label>
            <input type="text" name="lastname" class="border p-2 w-full" />
          </div>
          <div>
            <label class="block">Correo:</label>
            <input type="email" name="email" class="border p-2 w-full" />
          </div>
          <div>
            <label class="block">Teléfono:</label>
            <input type="tel" name="phone" class="border p-2 w-full" />
          </div>
          <div>
            <label class="block">Dirección:</label>
            <input type="text" name="address" class="border p-2 w-full" />
          </div>
          <div>
            <label class="block">Selecciona:</label>
            <select class="border p-2 w-full" name="type">
              <option value="rider">Rider</option>
              <option value="restaurante">Restaurante</option>
            </select>
          </div>
          <div class="flex justify-end">
            <Button
              label="Enviar"
              data-modal-close
              style="background-color:#ED2024; border: none"
            />
          </div>
        </form>
      </div>
    </div>
  </ModalBody>
</Modal>
